from userbot import YOURLS_URL, YOURLS_KEY

from yourls import YOURLSClient
import aiohttp

async def shorten(url, keyword):
    if not YOURLS_URL or not YOURLS_KEY:
        return "API ERROR"
	if url_check(url):
		yourls = YOURLSClient(YOURLS_URL, signature=YOURLS_KEY)
		shorturl = yourls.shorten(url, keyword).shorturl
		result = shorturl
	else:
		result = "INVALID URL"
	return result
	
async def url_check(url):
    try:
       async with aiohttp.ClientSession() as session:
           async with session.get(url) as resp:
               return resp.status == 200
    except aiohttp.ClientError:
        return False
